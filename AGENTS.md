# Contributor Guide

## Project Structure
This repository is a step-based Python pipeline for analyzing YouTube watch history.
- `main.py`: orchestrates all pipeline stages in order.
- `steps/01_scrape_history.py` to `steps/06_visualize.py`: core workflow (scrape history, extract IDs, deduplicate, enrich metadata, categorize, generate charts).
- `utils/`: shared helpers (`env_loader.py`, `date_utils.py`).
- `data/`: intermediate CSV files generated by each step.
- `output/`: final visual assets (PNG charts).
- `README.md`: user-facing setup and workflow context.

## Build/Test Commands
Use Python 3.10+ in a virtual environment.
```bash
python -m venv .venv
source .venv/bin/activate
pip install -r requirements.txt
# Step 1 also requires browser automation deps if missing:
pip install selenium webdriver-manager
```
Run the full pipeline:
```bash
python main.py
```
Run an individual stage:
```bash
python steps/04_enrich_metadata.py
```
Quick syntax check before opening a PR:
```bash
python -m py_compile main.py steps/*.py utils/*.py
```

## Style
- Follow PEP 8 with 4-space indentation and `snake_case` names.
- Keep scripts small and single-purpose; prefer pure helper functions for reusable logic.
- Use explicit, readable variable names and fail-fast checks for missing input/env vars.
- Keep file paths relative to repo root (`data/...`, `output/...`) to preserve pipeline compatibility.

## Testing
There is no formal automated test suite yet. Validate changes with:
- A full pipeline smoke run (`python main.py`) on a small sample.
- Stage-level reruns for edited files.
- Basic output validation: expected CSV appears in `data/`, expected charts appear in `output/`.
When adding non-trivial logic, include lightweight unit tests (e.g., date parsing, duration parsing, category normalization) in a new `tests/` folder.

## PR and Commit Guidelines
- Use focused commits with imperative messages (e.g., `fix: handle missing video duration`).
- Keep PRs scoped to one behavior change; avoid bundling refactors with feature work.
- In each PR description, include: what changed, why, validation steps run, and sample output paths.
- Never commit secrets (`.env`, API keys) or generated artifacts (`*.csv`, `*.png`, browser profile data).
